/*
 * Copyright (C) 2015 Freescale Semiconductor, Inc.
 *
 * SPDX-License-Identifier:	GPL-2.0+
 *
 * Refer doc/README.imximage for more details about how-to configure
 * and create imximage boot image
 *
 * The syntax is taken as close as possible with the kwbimage
 */

/* image version */
IMAGE_VERSION 2

/*
 * Boot Device : one of spi, sd, sata
 * the board has no nand and eimnor
 * spinor: flash_offset: 0x0400
 * sata:   flash_offset: 0x0400
 * sd/mmc: flash_offset: 0x0400
 */

/* the same flash_offset as sd */
BOOT_FROM      sd

/*
 * Device Configuration Data (DCD)
 *
 * Each entry must have the format:
 * Addr-type           Address        Value
 *
 * where:
 *      Addr-type register length (1,2 or 4 bytes)
 *      Address   absolute address of the register
 *      value     value to be stored in the register
 */


/* set the default clock gate to save power Original values
DATA 4, 0x020c4068, 0x00C03F3F
DATA 4, 0x020c406c, 0x0030FC03
DATA 4, 0x020c4070, 0x0FFFC000
DATA 4, 0x020c4074, 0x3FF00000
DATA 4, 0x020c4078, 0x00FFF300
DATA 4, 0x020c407c, 0x0F0000F3
DATA 4, 0x020c4080, 0x000003FF
DATA 4, 0x020c4084, 0xFFFFFFFF*/

/* set the default clock gate to save power */
DATA 4, 0x020c4068, 0xFFFFFFFF
DATA 4, 0x020c406c, 0xFFFFFFFF
DATA 4, 0x020c4070, 0xFFFFFFFF
DATA 4, 0x020c4074, 0xFFFFFFFF
DATA 4, 0x020c4078, 0xFFFFFFFF
DATA 4, 0x020c407c, 0xFFFFFFFF
DATA 4, 0x020c4080, 0xFFFFFFFF
DATA 4, 0x020c4084, 0xFFFFFFFF

/* DDR IO Type */
DATA 4, 0x020e0798, 0x000C0000
DATA 4, 0x020e0758, 0x00000000

/* Clock */
DATA 4, 0x020e0588, 0x00000038
DATA 4, 0x020e0594, 0x00000038

/* Address */
DATA 4, 0x020e056c, 0x00000038
DATA 4, 0x020e0578, 0x00000038
DATA 4, 0x020e074c, 0x00000038

/* Control */
DATA 4, 0x020e057c, 0x00000038
DATA 4, 0x020e058c, 0x00000000
DATA 4, 0x020e059c, 0x00000038
DATA 4, 0x020e05a0, 0x00000038
DATA 4, 0x020e078c, 0x00000038

/* Data Strobes */

DATA 4, 0x020e0750, 0x00020000
DATA 4, 0x020e05a8, 0x00000038
DATA 4, 0x020e05b0, 0x00000038
DATA 4, 0x020e0524, 0x00000038
DATA 4, 0x020e051c, 0x00000038
DATA 4, 0x020e0518, 0x00000038
DATA 4, 0x020e050c, 0x00000038
DATA 4, 0x020e05b8, 0x00000038
DATA 4, 0x020e05c0, 0x00000038

/* Data */

DATA 4, 0x020e0774, 0x00020000
DATA 4, 0x020e0784, 0x00000038
DATA 4, 0x020e0788, 0x00000038
DATA 4, 0x020e0794, 0x00000038
DATA 4, 0x020e079c, 0x00000038
DATA 4, 0x020e07a0, 0x00000038
DATA 4, 0x020e07a4, 0x00000038
DATA 4, 0x020e07a8, 0x00000038
DATA 4, 0x020e0748, 0x00000038

DATA 4, 0x020e05ac, 0x00000038
DATA 4, 0x020e05b4, 0x00000038
DATA 4, 0x020e0528, 0x00000038
DATA 4, 0x020e0520, 0x00000038
DATA 4, 0x020e0514, 0x00000038
DATA 4, 0x020e0510, 0x00000038
DATA 4, 0x020e05bc, 0x00000038
DATA 4, 0x020e05c4, 0x00000038



/* DDR Controller Register */
DATA 4, 0x021b001c, 0x00008000
DATA 4, 0x021b0800, 0xA1390003

/*Write leveling calibration
DATA 4, 0x021b080c, 0x000E0014
DATA 4, 0x021b0810, 0x001A000E
DATA 4, 0x021b480c, 0x000C001E
DATA 4, 0x021b4810, 0x000B0018*/

DATA 4 0x021b080c 0x0006000A
DATA 4 0x021b0810 0x00150004
DATA 4 0x021b480c 0x00040015
DATA 4 0x021b4810 0x0008000C

/*Read DQS Gating calibration*/
DATA 4, 0x021b083c, 0x43040314
DATA 4, 0x021b0840, 0x03040304
DATA 4, 0x021b483c, 0x43140328
DATA 4, 0x021b4840, 0x0304025C

/*Read calibration*/
DATA 4, 0x021b0848, 0x40323438
DATA 4, 0x021b4848, 0x34302C3A

/*Write calibration*/
DATA 4, 0x021b0850, 0x3C3C403A
DATA 4, 0x021b4850, 0x4A324A3E

/* read data bit delay */

DATA 4, 0x021b081c, 0x33333333
DATA 4, 0x021b0820, 0x33333333
DATA 4, 0x021b0824, 0x33333333
DATA 4, 0x021b0828, 0x33333333
DATA 4, 0x021b481c, 0x33333333
DATA 4, 0x021b4820, 0x33333333
DATA 4, 0x021b4824, 0x33333333
DATA 4, 0x021b4828, 0x33333333
DATA 4, 0x021b08c0, 0x24912249
DATA 4, 0x021b48c0, 0x24914289

/*  Complete calibration by forced measurement */
DATA 4, 0x021b08b8, 0x00000800
DATA 4, 0x021b48b8, 0x00000800

/* MMDC Init */
DATA 4, 0x021b0004, 0x00020036
DATA 4, 0x021b0008, 0x24444040
DATA 4, 0x021b000c, 0x555A7955
DATA 4, 0x021b0010, 0xFF320F64
DATA 4, 0x021b0014, 0x01ff00db


DATA 4, 0x021b0018, 0x00001740
DATA 4, 0x021b001c, 0x00008000
DATA 4, 0x021b002c, 0x000026d2
DATA 4, 0x021b0030, 0x005A1023
DATA 4, 0x021b0040, 0x00000027
DATA 4, 0x021b0400, 0x14420000
DATA 4, 0x021b0000, 0x831A0000

/*Mode register writes */

DATA 4, 0x021b0890, 0x00400C58
DATA 4, 0x00bb0008, 0x00000000
DATA 4, 0x00bb000c, 0x2891E41A
DATA 4, 0x00bb0038, 0x00000564
DATA 4, 0x00bb0014, 0x00000040
DATA 4, 0x00bb0028, 0x00000020
DATA 4, 0x00bb002c, 0x00000020
DATA 4, 0x021b001c, 0x04088032
DATA 4, 0x021b001c, 0x00008033
DATA 4, 0x021b001c, 0x00048031
DATA 4, 0x021b001c, 0x09408030
DATA 4, 0x021b001c, 0x04008040
DATA 4, 0x021b0020, 0x00005800
DATA 4, 0x021b0818, 0x00022227
DATA 4, 0x021b4818, 0x00022227
DATA 4, 0x021b0004, 0x00025576
DATA 4, 0x021b0404, 0x00011006
DATA 4, 0x021b001c, 0x00000000

/* enable AXI cache for VDOA/VPU/IPU */
/*DATA 4, 0x020e0010, 0xF00000CF*/
/* set IPU AXI-id1 Qos=0x1 AXI-id0/2/3 Qos=0x7 */
/*DATA 4, 0x020e0018, 0x77177717*/
/*DATA 4, 0x020e001c, 0x77177717*/


/*Before calibartion*/
/* write levelling calibration
DATA 4, 0x021b0800, 0xa1390003
DATA 4, 0x021b080c, 0x001b001e

DATA 4, 0x021b0810, 0x002e0029
DATA 4, 0x021b480c, 0x001b002a
DATA 4, 0x021b4810, 0x0019002c

/* Read DQS Gating calibration 

DATA 4, 0x021b083c, 0x43240334
DATA 4, 0x021b0840, 0x0324031a
DATA 4, 0x021b483c, 0x43340344
DATA 4, 0x021b4840, 0x03280276

/* Read Calibration
DATA 4, 0x021b0848, 0x44383A3E
DATA 4, 0x021b4848, 0x3C3C3846

/* Write calibration
DATA 4, 0x021b0850, 0x2e303230
DATA 4, 0x021b4850, 0x38283E34

/*After calibration*/

/*
   Write leveling calibration
   MMDC_MPWLDECTRL0 ch0 (0x021b080c) = 0x000E0014
   MMDC_MPWLDECTRL1 ch0 (0x021b0810) = 0x001A000E
   MMDC_MPWLDECTRL0 ch1 (0x021b480c) = 0x000C001E
   MMDC_MPWLDECTRL1 ch1 (0x021b4810) = 0x000B0018

   Read DQS Gating calibration
   MPDGCTRL0 PHY0 (0x021b083c) = 0x43040314
   MPDGCTRL1 PHY0 (0x021b0840) = 0x03040304
   MPDGCTRL0 PHY1 (0x021b483c) = 0x43140328
   MPDGCTRL1 PHY1 (0x021b4840) = 0x0304025C

   Read calibration
   MPRDDLCTL PHY0 (0x021b0848) = 0x40323438
   MPRDDLCTL PHY1 (0x021b4848) = 0x34302C3A

   Write calibration
   MPWRDLCTL PHY0 (0x021b0850) = 0x3C3C403A
   MPWRDLCTL PHY1 (0x021b4850) = 0x4A324A3E
*/
